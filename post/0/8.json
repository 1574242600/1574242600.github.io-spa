{"info":{"title":"[php] av号 bv号 互转","date":1585011000,"tags":"php"},"path":"./source/_posts/php-bvhao.md","content":"<blockquote>\n<p>参考(caoxi)自 mcfx的回答 <a href=\"https://www.zhihu.com/question/381784377/answer/1099438784\">https://www.zhihu.com/question/381784377/answer/1099438784</a>  </p>\n</blockquote>\n<!--more-->\n<h2 id=\"正文\">正文</h2>\n<pre><code class=\"language-php\">$table = <span class=\"hljs-string\">&#x27;fZodR9XQDSUm21yCkr6zBqiveYah8bt4xsWpHnJE7jL5VG3guMTKNPAwcF&#x27;</span>;\n$tr = [];\n<span class=\"hljs-keyword\">for</span> ($i = <span class=\"hljs-number\">0</span>; $i !== <span class=\"hljs-number\">58</span>; $i++){\n    $tr[$table[$i]] = $i;\n}\n$s = [<span class=\"hljs-number\">11</span>,<span class=\"hljs-number\">10</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">8</span>,<span class=\"hljs-number\">4</span>,<span class=\"hljs-number\">6</span>];\n$add = <span class=\"hljs-number\">8728348608</span>;\n\nfunction dec($x){\n   <span class=\"hljs-keyword\">global</span> $tr,$s,$add;\n    $r = <span class=\"hljs-number\">0</span>;\n    <span class=\"hljs-keyword\">for</span> ($i = <span class=\"hljs-number\">0</span>; $i !== <span class=\"hljs-number\">6</span>; $i++){\n        $r += $tr[$x[$s[$i]]]*<span class=\"hljs-keyword\">pow</span>(<span class=\"hljs-number\">58</span>,$i);\n   }\n    <span class=\"hljs-keyword\">return</span> ($r-$add)^<span class=\"hljs-number\">177451812</span>;\n}\n\nfunction enc($x){\n   <span class=\"hljs-keyword\">global</span> $add,$table,$s;\n    $x = ($x^<span class=\"hljs-number\">177451812</span>) + $add;\n    $r = <span class=\"hljs-string\">&#x27;BV1  4 1 7  &#x27;</span>;\n    <span class=\"hljs-keyword\">for</span> ($i = <span class=\"hljs-number\">0</span>; $i !== <span class=\"hljs-number\">6</span>; $i++){\n      $k = <span class=\"hljs-keyword\">floor</span>($x/<span class=\"hljs-keyword\">pow</span>(<span class=\"hljs-number\">58</span>,$i)%58);\n         $r[$s[$i]] = $table[$k];\n  }\n    <span class=\"hljs-keyword\">return</span> $r;\n}\n\n<span class=\"hljs-keyword\">print</span>(dec(<span class=\"hljs-string\">&#x27;BV17x411w7KC&#x27;</span>).<span class=\"hljs-string\">&quot;\\n&quot;</span>);\n<span class=\"hljs-keyword\">print</span>(dec(<span class=\"hljs-string\">&#x27;BV1Q541167Qg&#x27;</span>).<span class=\"hljs-string\">&quot;\\n&quot;</span>);\n<span class=\"hljs-keyword\">print</span>(dec(<span class=\"hljs-string\">&#x27;BV1mK4y1C7Bz&#x27;</span>).<span class=\"hljs-string\">&quot;\\n&quot;</span>);\n<span class=\"hljs-keyword\">print</span>(enc(<span class=\"hljs-number\">170001</span>).<span class=\"hljs-string\">&quot;\\n&quot;</span>);\n<span class=\"hljs-keyword\">print</span>(enc(<span class=\"hljs-number\">455017605</span>).<span class=\"hljs-string\">&quot;\\n&quot;</span>);\n<span class=\"hljs-keyword\">print</span>(enc(<span class=\"hljs-number\">882584971</span>).<span class=\"hljs-string\">&quot;\\n&quot;</span>);</code></pre>\n<p>###输出</p>\n<pre><code><span class=\"hljs-number\">170001</span>\n<span class=\"hljs-number\">455017605</span>\n<span class=\"hljs-number\">882584971</span>\nBV17x411w7KC\nBV1Q541167Qg\nBV1mK4y1C7Bz</code></pre>\n<h2 id=\"题外话\">题外话</h2>\n<p>bv号很早就有了<br><img src=\"https://i.loli.net/2020/03/24/MwgDIyX4RPsx6ZU.png\" alt=\"\"><br><img src=\"https://i.loli.net/2020/03/24/wgKLPGQxFb8DsYW.png\" alt=\"\"><br>小三转正了,23333333  </p>\n","nav":[[2,"正文"],[2,"题外话"]]}